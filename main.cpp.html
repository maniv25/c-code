#include <iostream>   // This library allows input and output operations (e.g., reading user input or displaying text).
#include <string>     // This library allows us to use and manipulate text (strings).
#include <cmath>      // This library provides mathematical functions, such as square root and power functions.

int main() {
    // Declare several variables used throughout the program
    int iq, x, y;                  // 'iq' for IQ input, 'x' and 'y' for number inputs during calculations.
    std::string choice;             // 'choice' will store user's yes/no input for various decisions.
    int programChoice;              // 'programChoice' stores the user's selection for which program to run.
    std::string operation;          // 'operation' stores the userâ€™s choice between multiplication/division or power/square root.
    std::string continueProgram;    // 'continueProgram' checks if the user wants to keep using the program.
    std::string confirm;            // 'confirm' ensures the user really wants to continue running the program.
    std::string cleverEnough;       // 'cleverEnough' checks if the user thinks they are clever enough for more tasks.

    // This 'do-while' loop repeatedly asks for the IQ input until the user decides to stop.
    do {
        // Ask the user to input their IQ.
        std::cout << "Hey there welcome to my program, to continue please enter your IQ: ";
        std::cin >> iq;  // Store the user's IQ input into the variable 'iq'.

        // Check if the IQ is below 80.
        if (iq < 80) {
            // If the IQ is too low, display a message and exit the program.
            std::cout << "Whoops.... Sorry, but you don't qualify for the extra tasks.\n";
            std::cout << "Thanks for trying my program, have a great day!\n";
            return 0; // Exit the program early because the user doesn't qualify.
        }
        else if (iq <= 150) {
            // If IQ is between 80 and 150, congratulate the user.
            std::cout << "You are pretty clever \nWell done!\n";
        }
        else {
            // If the IQ is above 150, display a special message for very clever users.
            std::cout << "OMG!! \nHow did you get so clever?\n";
        }

        // Ask if the user thinks they are clever enough to try additional tasks.
        std::cout << "Do you think you're clever enough to try some additional tasks? (yes/no): ";
        std::cin >> cleverEnough;  // Store their answer in the variable 'cleverEnough'.

        // If the user says 'yes', they will proceed to the next part of the program.
        if (cleverEnough == "yes") {
            std::cout << "Great! Let's try some additional tasks.\n";
            choice = "yes"; // Set choice to 'yes' to break out of this loop and move forward.
            break; // Exit the IQ input loop and proceed to the additional tasks section.
        }

        // Ask the user if they want to enter another IQ (repeat the IQ input process).
        std::cout << "Would you like to enter another IQ? (yes/no): ";
        std::cin >> choice;  // Store the user's response in the variable 'choice'.

        if (choice == "yes") {
            // If the user wants to input another IQ, acknowledge it.
            std::cout << "Yay, thanks!\n";
        }

    } while (choice == "yes");  // This loop will repeat if the user wants to input another IQ.

    // After the IQ input loop, ask if the user wants to try a different program.
    if (choice != "yes") {
        std::cout << "Please try a different program if the iq test isn't for you! :) (yes/no): ";
        std::cin >> choice;  // Store the user's response in 'choice'.

        // If the user says 'no', end the program.
        if (choice == "no") {
            std::cout << "No worries, thanks for trying my program, have a great day!\n";
            return 0; // End the program here.
        }
    }

    // This loop allows the user to run different programs multiple times.
    while (choice == "yes") {
        // Ask the user if they are sure about continuing with the program.
        std::cout << "You pressed 'yes'. Are you sure you'd like to continue? (yes/no): ";
        std::cin >> confirm;  // Store their answer in 'confirm'.

        if (confirm == "no") {
            // If they don't want to continue, end the program.
            std::cout << "Cool, Ending the program. Have a nice day!\n";
            std::cout << "Program ended.....!\n";
            break;  // Exit the loop and end the program.
        }

        // Present the user with options: addition, multiplication/division, powers/square root.
        std::cout << "What would you like to run?:\n";
        std::cout << "1 - Addition\n";
        std::cout << "2 - Multiplication or Division\n";
        std::cout << "3 - Powers or Square Root\n";
        std::cout << "Choose!! (1, 2, or 3): ";
        std::cin >> programChoice;  // Store the user's choice in 'programChoice'.

        // If the user selects option 1 (Addition).
        if (programChoice == 1) {
            std::cout << "Cool! Let's add two numbers.\n";
            std::cout << "Enter the first number (x): ";
            std::cin >> x;  // Store the first number in 'x'.
            std::cout << "Enter the second number (y): ";
            std::cin >> y;  // Store the second number in 'y'.
            std::cout << "The answer for " << x << " and " << y << " is " << (x + y) << ".\n";  // Display the result.
        }
        // If the user selects option 2 (Multiplication or Division).
        else if (programChoice == 2) {
            std::cout << "Cool! Let's choose an operation.\n";
            std::cout << "Which one would you like to do? (type 'multiply' or 'divide'): ";
            std::cin >> operation;  // Store the user's operation choice (multiply or divide).

            std::cout << "Enter the first number (x): ";
            std::cin >> x;  // Store the first number in 'x'.
            std::cout << "Enter the second number (y): ";
            std::cin >> y;  // Store the second number in 'y'.

            // If the user chose multiplication.
            if (operation == "multiply") {
                std::cout << "The answer for " << x << " and " << y << " is " << (x * y) << ".\n";  // Display the result.
            }
            // If the user chose division.
            else if (operation == "divide") {
                // Prevent division by zero (which is undefined).
                if (y != 0) {
                    std::cout << "The answer for " << x << " divided by " << y << " is " << (x / y) << ".\n";  // Display the result.
                } else {
                    std::cout << "Division by zero is not allowed!\n";  // Display an error if the second number is 0.
                }
            } else {
                std::cout << "Invalid operation! Please restart and choose either 'multiply' or 'divide'.\n";  // Handle invalid input.
            }
        }
        // If the user selects option 3 (Powers or Square Root).
        else if (programChoice == 3) {
            std::cout << "Cool! Let's choose between power or square root.\n";
            std::cout << "Would you like to find the power of a number or the square root? (type 'power' or 'sqrt'): ";
            std::cin >> operation;  // Store the user's choice (power or sqrt).

            // If the user chose power.
            if (operation == "power") {
                std::cout << "Enter the base number (x): ";
                std::cin >> x;  // Store the base number in 'x'.
                std::cout << "Enter the exponent (y): ";
                std::cin >> y;  // Store the exponent in 'y'.
                std::cout << x << " to the power of " << y << " is " << pow(x, y) << ".\n";  // Display the result using the pow() function.
            }
            // If the user chose square root.
            else if (operation == "sqrt") {
                std::cout << "Enter the number to find the square root of (x): ";
                std::cin >> x;  // Store the number in 'x'.
                if (x >= 0) {
                    std::cout << "The square root of " << x << " is " << sqrt(x) << ".\n";  // Display the result using the sqrt() function.
                } else {
                    std::cout << "Square root of a negative number is not allowed!\n";  // Display an error for negative numbers.
                }
            } else {
                std::cout << "Invalid operation! Please restart and choose either 'power' or 'sqrt'.\n";  // Handle invalid input for power or square root choice.
            }
        }
        else {
            // If the user enters a number other than 1, 2, or 3, notify them it's an invalid choice.
            std::cout << "Invalid choice! Please restart the program and choose 1, 2, or 3.\n";
        }

        // After the operation, ask if the user wants to try something else.
        std::cout << "Please try something else! (yes/no): ";
        std::cin >> continueProgram;  // Store the user's decision to continue in 'continueProgram'.

        // If the user says "no", break out of the loop and end the program.
        if (continueProgram == "no") {
            std::cout << "No worries, thanks for trying my program, have a great day!\n";
            break;  // Exit the loop, which ends the program.
        }
    }

    return 0;  // End the program with a successful exit status.
}
